<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="JubileeVerse Admin Dashboard">
  <title>Admin Dashboard - JubileeVerse</title>
  <link rel="icon" type="image/png" href="/images/personas/jubilee.png">
  <link rel="apple-touch-icon" href="/images/personas/jubilee.png">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&family=Oswald:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/admin-header.css">
  <link rel="stylesheet" href="/css/admin-sidebar.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, sans-serif;
      background-color: #000;
      color: #f2f2f2;
      overflow: hidden;
    }

    /* Custom scrollbar styles */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #1a1a1a;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
      background: #666;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #888;
    }

    /* Firefox scrollbar */
    * {
      scrollbar-width: thin;
      scrollbar-color: #666 #1a1a1a;
    }

    .app-container {
      display: flex;
      height: calc(100vh - 41px);
      width: 100vw;
      margin-top: 36px;
    }

    .main-area {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      padding-top: 0;
    }

    .admin-content {
      flex: 1;
      display: flex;
      padding: 24px;
      padding-top: 0;
      margin-top: -90px;
      margin-right: 72px; /* Account for fixed right control panel */
      gap: 24px;
      overflow: visible;
    }

    .admin-button-column {
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: 8px;
      width: 220px;
      flex-shrink: 0;
      background: #000;
      padding: 16px;
      padding-top: 100px;
      border-radius: 12px;
    }

    .admin-btn {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      gap: 10px;
      padding: 10px 12px;
      background: #000;
      border: 2px solid #fbbf24;
      border-radius: 8px;
      color: #ffffff;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.15s ease;
      min-height: 50px;
    }

    .admin-btn__avatar {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      object-fit: cover;
      flex-shrink: 0;
    }

    .admin-btn__name {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      flex: 1;
    }

    .admin-btn__count {
      font-size: 11px;
      font-weight: 600;
      color: #ffbd59;
      background: rgba(251, 191, 36, 0.15);
      padding: 2px 6px;
      border-radius: 4px;
      min-width: 24px;
      text-align: center;
      margin-left: auto;
    }

    /* Meltdown Popup Overlay - offset by sidebar widths for visual centering */
    .meltdown-overlay {
      position: fixed;
      top: 0;
      left: 60px; /* Left sidebar width */
      width: calc(100vw - 60px - 72px); /* Subtract left sidebar and right sidebar */
      height: 100vh;
      background: transparent;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease;
      pointer-events: none;
    }

    .meltdown-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .meltdown-popup {
      background: linear-gradient(135deg, #8b0000, #cc0000, #ff0000);
      border: 1px solid #ff4444;
      border-radius: 6px;
      padding: 20px 26px;
      text-align: center;
      box-shadow: 0 0 20px rgba(255, 0, 0, 0.8), 0 0 40px rgba(255, 0, 0, 0.4), inset 0 0 11px rgba(0, 0, 0, 0.3);
      animation: meltdownPulse 0.5s ease-in-out infinite;
      pointer-events: auto;
    }

    .meltdown-popup.safe {
      background: linear-gradient(135deg, #006400, #008000, #00aa00);
      border-color: #00ff00;
      box-shadow: 0 0 18px rgba(0, 255, 0, 0.8), 0 0 36px rgba(0, 255, 0, 0.4), inset 0 0 10px rgba(0, 0, 0, 0.3);
      animation: none;
    }

    .meltdown-text {
      font-family: 'Oswald', sans-serif;
      font-size: 18px;
      font-weight: 700;
      color: #ffffff;
      text-transform: uppercase;
      letter-spacing: 2px;
      text-shadow: 0 0 6px rgba(255, 255, 255, 0.8), 0 0 12px rgba(255, 0, 0, 0.6);
    }

    .meltdown-popup.safe .meltdown-text {
      text-shadow: 0 0 6px rgba(255, 255, 255, 0.8), 0 0 12px rgba(0, 255, 0, 0.6);
    }

    @keyframes meltdownPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.02); }
    }

    @keyframes meltdownFlash {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    .meltdown-text.flashing {
      animation: meltdownFlash 0.45s ease-in-out;
    }

    .admin-btn:hover {
      background: rgba(255, 215, 0, 0.15);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(251, 191, 36, 0.3);
    }

    .admin-btn:active {
      transform: translateY(0);
    }

    .admin-center-panel {
      flex: 1;
      background: #000;
      border: 1px solid #1e1e1e;
      border-radius: 12px;
      overflow: hidden;
      min-height: 0;
    }

    .admin-center-panel__content {
      padding: 16px;
      padding-top: 0;
      padding-bottom: 0;
      margin-top: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100%;
    }

    .visualizer-container {
      position: relative;
      width: 500px;
      height: 500px;
      flex-shrink: 0;
    }

    #visualizer {
      width: 500px;
      height: 500px;
    }

    /* Bottom section wrapper - contains analytics row + TOKENIZER boxes */
    .admin-bottom-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      max-width: 500px;
      margin-top: -95px;
    }

    /* Admin Info Panel - underneath visualizer */
    .admin-info-panel {
      display: flex;
      gap: 10px;
      width: 100%;
      max-width: 500px;
    }

    /* Admin Info Panel - above visualizer */
    .admin-info-panel--top {
      margin-top: 100px;
      margin-bottom: -80px;
      position: relative;
      z-index: 10;
    }

    .admin-info-box {
      flex: 1;
      background-color: #000;
      border: 2px solid #ffbd59;
      border-radius: 8px;
      padding: 8px 4px;
      min-height: 50px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-width: 0;
      cursor: pointer;
      transition: all 0.15s ease;
      font-family: inherit;
      position: relative;
    }

    .admin-info-box:hover {
      background-color: rgba(255, 215, 0, 0.15);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(251, 191, 36, 0.3);
    }

    .admin-info-box:active {
      transform: translateY(0);
    }

    .admin-info-box__title {
      font-size: 9px;
      color: #888;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 4px;
    }

    .admin-info-box__value {
      font-size: 18px;
      font-weight: bold;
      color: #fff;
    }

    .admin-info-box__icon {
      width: 28px;
      height: 28px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 4px;
      font-size: 14px;
      position: relative;
      z-index: 1;
      /* Make emoji icons appear black */
      filter: brightness(0);
      -webkit-filter: brightness(0);
    }

    /* Yellow circle background via parent pseudo-element */
    .admin-info-box--branding {
      position: relative;
    }

    .admin-info-box--branding::before {
      content: '';
      position: absolute;
      top: 8px;
      left: 50%;
      transform: translateX(-50%);
      width: 28px;
      height: 28px;
      background-color: #ffbd59;
      border-radius: 50%;
      z-index: 0;
    }

    .admin-info-box__icon--yellow {
      filter: none;
      -webkit-filter: none;
    }

    .admin-info-box__icon--logo {
      filter: none;
      -webkit-filter: none;
    }

    /* Analytics Summary Row - positioned between visualizer and tokenizer boxes */
    .admin-analytics-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      padding: 0 5px;
      margin-bottom: 8px;
    }

    .admin-analytics-text {
      font-size: 14px;
      font-weight: 500;
      color: #fff;
      font-family: inherit;
    }

    .admin-analytics-text__label {
      color: #ffbd59;
      font-weight: 600;
    }

    .admin-analytics-text__value {
      color: #fff;
    }

    .admin-analytics-text__revenue {
      color: #4ade80;
    }

    .admin-analytics-text__cost {
      color: #f87171;
    }

    .admin-info-box__icon svg {
      width: 16px;
      height: 16px;
      fill: #000;
    }

    .admin-info-box--branding .admin-info-box__title {
      font-size: 10px;
      font-weight: bold;
      color: #ffbd59;
      margin-top: 10px;
    }

    .admin-info-box--branding .admin-info-box__value {
      font-size: 8px;
      font-weight: normal;
      color: #ffbd59;
      margin-top: -5px;
    }

    /* AI Status Indicator - overlays on the bottom-right of the icon */
    .ai-status-indicator {
      position: absolute;
      top: 27px;
      right: 23px;
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background-color: #666;
      border: 2px solid #1a1a1a;
      z-index: 10;
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
    }

    .ai-status-indicator.healthy {
      background-color: #22c55e;
      box-shadow: 0 0 6px rgba(34, 197, 94, 0.6);
    }

    .ai-status-indicator.unhealthy {
      background-color: #ef4444;
      box-shadow: 0 0 6px rgba(239, 68, 68, 0.6);
    }

    .ai-status-indicator.backup {
      background-color: #f59e0b;
      box-shadow: 0 0 6px rgba(245, 158, 11, 0.6);
    }

    .ai-status-indicator.checking {
      background-color: #3b82f6;
      animation: statusPulse 1s ease-in-out infinite;
    }

    @keyframes statusPulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.4; }
    }

    @media (max-width: 900px) {
      .admin-content {
        flex-direction: column;
        overflow-y: auto;
      }

      .admin-button-column {
        width: 100%;
        flex-direction: row;
        flex-wrap: wrap;
      }

      .admin-btn {
        flex: 1;
        min-width: 140px;
      }

      .admin-center-panel {
        min-height: 300px;
      }
    }

    /* ==================== RIGHT CONTROL PANEL ==================== */
    /* Fixed position at far right edge - matches Tasks page interaction model */
    .dashboard-control-panel {
      position: fixed;
      right: 0;
      top: 36px;
      width: 72px;
      min-width: 72px;
      height: calc(100vh - 36px);
      background: linear-gradient(180deg, #111 0%, #0a0a0a 100%);
      border-left: 1px solid #222;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 24px 12px;
      padding-bottom: 80px; /* Space for bottom safety button */
      gap: 16px;
      flex-shrink: 0;
      z-index: 1000;
    }

    /* Safety Test Button - anchored at bottom of right sidebar */
    .safety-test-btn {
      position: absolute;
      bottom: 24px;
      left: 50%;
      transform: translateX(-50%);
      width: 48px;
      height: 48px;
      border: 2px solid #ff4444;
      border-radius: 10px;
      background: linear-gradient(135deg, rgba(139, 0, 0, 0.3) 0%, rgba(139, 0, 0, 0.1) 100%);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }

    .safety-test-btn:hover {
      background: linear-gradient(135deg, rgba(255, 0, 0, 0.3) 0%, rgba(139, 0, 0, 0.2) 100%);
      border-color: #ff6666;
      box-shadow: 0 0 12px rgba(255, 0, 0, 0.4), 0 0 24px rgba(255, 0, 0, 0.2);
    }

    .safety-test-btn svg {
      width: 24px;
      height: 24px;
      fill: #ff4444;
      transition: fill 0.2s ease;
    }

    .safety-test-btn:hover svg {
      fill: #ff6666;
      filter: drop-shadow(0 0 4px rgba(255, 0, 0, 0.6));
    }

    .safety-test-btn .control-btn-label {
      position: absolute;
      right: 60px;
      background: #222;
      color: #ff4444;
      font-size: 11px;
      font-weight: 600;
      padding: 6px 10px;
      border-radius: 6px;
      white-space: nowrap;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease;
    }

    .safety-test-btn:hover .control-btn-label {
      opacity: 1;
    }

    .control-btn {
      width: 48px;
      height: 48px;
      border: 2px solid #333;
      border-radius: 10px;
      background: #151515;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      position: relative;
    }

    .control-btn:hover {
      background: #1f1f1f;
      border-color: #555;
    }

    .control-btn.active {
      background: linear-gradient(135deg, rgba(255, 189, 89, 0.15) 0%, rgba(255, 189, 89, 0.05) 100%);
      border-color: #ffbd59;
      box-shadow: 0 0 12px rgba(255, 189, 89, 0.4), 0 0 24px rgba(255, 189, 89, 0.2);
    }

    .control-btn.active svg {
      fill: #ffbd59;
      filter: drop-shadow(0 0 4px rgba(255, 189, 89, 0.6));
    }

    .control-btn svg {
      width: 24px;
      height: 24px;
      fill: #888;
      transition: fill 0.2s ease;
    }

    .control-btn:hover svg {
      fill: #bbb;
    }

    .control-btn-label {
      position: absolute;
      right: 60px;
      background: #222;
      color: #fff;
      font-size: 11px;
      padding: 6px 10px;
      border-radius: 6px;
      white-space: nowrap;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease;
    }

    .control-btn:hover .control-btn-label {
      opacity: 1;
    }

    .control-divider {
      width: 32px;
      height: 1px;
      background: #333;
      margin: 8px 0;
    }

    /* View switching - hide/show based on active view */
    .view-dashboard,
    .view-personas,
    .view-models,
    .view-jsv-bible,
    .view-knowledgebase {
      display: none;
    }

    body.dashboard-view-active .view-dashboard {
      display: flex;
    }

    body.personas-view-active .view-personas {
      display: flex;
    }

    body.models-view-active .view-models {
      display: flex;
    }

    body.jsv-bible-view-active .view-jsv-bible {
      display: flex;
    }

    body.knowledgebase-view-active .view-knowledgebase {
      display: flex;
    }

    /* JSV Bible View Styles */
    .jsv-bible-management {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 24px;
      overflow-y: auto;
    }

    .jsv-bible-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
    }

    .jsv-bible-title {
      font-size: 24px;
      font-weight: bold;
      color: #fff;
    }

    .jsv-bible-content {
      flex: 1;
      display: flex;
      gap: 24px;
    }

    .jsv-bible-sidebar {
      width: 280px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 12px;
      padding: 16px;
      border: 1px solid #333;
    }

    .jsv-bible-main {
      flex: 1;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 12px;
      padding: 24px;
      border: 1px solid #333;
    }

    .jsv-book-list {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .jsv-book-item {
      padding: 8px 12px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 6px;
      color: #ccc;
      cursor: pointer;
      transition: all 0.15s ease;
      font-size: 13px;
    }

    .jsv-book-item:hover {
      background: rgba(255, 189, 89, 0.15);
      color: #ffbd59;
    }

    .jsv-book-item.active {
      background: rgba(255, 189, 89, 0.2);
      color: #ffbd59;
      border-left: 3px solid #ffbd59;
    }

    /* Knowledgebase View Styles */
    .knowledgebase-management {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 24px;
      overflow-y: auto;
    }

    .knowledgebase-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
    }

    .knowledgebase-title {
      font-size: 24px;
      font-weight: bold;
      color: #fff;
    }

    .knowledgebase-content {
      flex: 1;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 20px;
    }

    .knowledge-card {
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid #333;
      border-radius: 12px;
      padding: 20px;
      cursor: pointer;
      transition: all 0.15s ease;
    }

    .knowledge-card:hover {
      background: rgba(255, 189, 89, 0.1);
      border-color: rgba(255, 189, 89, 0.3);
      transform: translateY(-2px);
    }

    .knowledge-card-icon {
      width: 48px;
      height: 48px;
      background: rgba(255, 189, 89, 0.15);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 16px;
    }

    .knowledge-card-icon svg {
      width: 24px;
      height: 24px;
      fill: #ffbd59;
    }

    .knowledge-card-title {
      font-size: 16px;
      font-weight: 600;
      color: #fff;
      margin-bottom: 8px;
    }

    .knowledge-card-desc {
      font-size: 13px;
      color: #888;
      line-height: 1.5;
    }

    .knowledge-card-count {
      margin-top: 12px;
      font-size: 12px;
      color: #ffbd59;
    }

    /* Personas View Styles */
    .personas-management {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 24px;
      overflow-y: auto;
    }

    .personas-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 24px;
    }

    .personas-title {
      font-size: 20px;
      font-weight: 600;
      color: #fff;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .personas-title svg {
      width: 24px;
      height: 24px;
      fill: #ffbd59;
    }

    .personas-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 16px;
    }

    .persona-card {
      background: #151515;
      border: 1px solid #222;
      border-radius: 12px;
      padding: 16px;
      display: flex;
      align-items: center;
      gap: 16px;
      transition: all 0.2s ease;
      cursor: pointer;
    }

    .persona-card:hover {
      background: #1a1a1a;
      border-color: #333;
    }

    .persona-card-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid #fbbf24;
    }

    .persona-card-info {
      flex: 1;
    }

    .persona-card-name {
      font-size: 14px;
      font-weight: 600;
      color: #fff;
      margin-bottom: 4px;
    }

    .persona-card-role {
      font-size: 11px;
      color: #888;
    }

    .persona-card-stats {
      text-align: right;
    }

    .persona-card-count {
      font-size: 16px;
      font-weight: 600;
      color: #ffbd59;
    }

    .persona-card-label {
      font-size: 9px;
      color: #666;
      text-transform: uppercase;
    }

    /* Models View Styles */
    .models-management {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 24px;
      overflow-y: auto;
    }

    .models-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 24px;
    }

    .models-title {
      font-size: 20px;
      font-weight: 600;
      color: #fff;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .models-title svg {
      width: 24px;
      height: 24px;
      fill: #ffbd59;
    }

    .models-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 16px;
    }

    .model-card {
      background: #151515;
      border: 1px solid #222;
      border-radius: 12px;
      padding: 20px;
      transition: all 0.2s ease;
    }

    .model-card:hover {
      background: #1a1a1a;
      border-color: #333;
    }

    .model-card-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
    }

    .model-card-icon {
      width: 40px;
      height: 40px;
      background: #222;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .model-card-icon svg {
      width: 24px;
      height: 24px;
      fill: #fff;
    }

    .model-card-title {
      font-size: 14px;
      font-weight: 600;
      color: #fff;
    }

    .model-card-provider {
      font-size: 11px;
      color: #888;
    }

    .model-card-stats {
      display: flex;
      gap: 16px;
    }

    .model-stat {
      flex: 1;
      text-align: center;
      padding: 8px;
      background: #0a0a0a;
      border-radius: 6px;
    }

    .model-stat-value {
      font-size: 14px;
      font-weight: 600;
      color: #fff;
    }

    .model-stat-label {
      font-size: 9px;
      color: #666;
      text-transform: uppercase;
    }

    .model-status-indicator {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      margin-left: auto;
    }

    .model-status-indicator.online {
      background: #22c55e;
      box-shadow: 0 0 8px rgba(34, 197, 94, 0.5);
    }

    .model-status-indicator.offline {
      background: #ef4444;
    }

    .model-status-indicator.checking {
      background: #fbbf24;
      animation: pulse 1.5s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- Admin Left Sidebar -->
    <div id="admin-sidebar-container">
      <!-- Navigation Order: Dashboard, Search, Tasks, Hospitality -->
      <div class="admin-sidebar">
        <a href="/admin" class="admin-sidebar-icon is-active" data-tooltip="Dashboard" data-nav="dashboard">
          <svg viewBox="0 0 24 24"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/></svg>
        </a>
        <a href="/search" class="admin-sidebar-icon" data-tooltip="Search" data-nav="search">
          <svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.47 6.47 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
        </a>
        <a href="/admin/tasks" class="admin-sidebar-icon" data-tooltip="Tasks" data-nav="tasks">
          <svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
        </a>
        <a href="/admin/hospitality" class="admin-sidebar-icon" data-tooltip="Hospitality" data-nav="hospitality">
          <svg viewBox="0 0 24 24"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/></svg>
        </a>
        <a href="/admin/collections" class="admin-sidebar-icon" data-tooltip="Collections" data-nav="collections">
          <svg viewBox="0 0 24 24"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H8V4h12v12z"/></svg>
        </a>
        <div class="admin-sidebar-spacer"></div>
        <div class="admin-sidebar-brand-section">
          <div class="admin-sidebar-brand-text">Jubilee<span class="verse">Verse</span><span class="dotcom">.com</span></div>
          <div class="admin-sidebar-brand-sub">ADMIN DASHBOARD</div>
        </div>
        <div class="admin-sidebar-avatar">
          <img src="/images/personas/jubilee.png" alt="Admin">
        </div>
      </div>
    </div>

    <!-- Main Area -->
    <div class="main-area">
      <!-- Admin Header -->
      <div class="admin-header">
        <div class="admin-header-left">
          <a href="/search" class="admin-header-logo">
            <span class="logo-jubilee">Jubilee</span><span class="logo-intelligence">Intelligence</span>
          </a>
        </div>
        <div class="admin-header-right">
          <span class="admin-header-user-name" id="adminUserName"></span>
          <span class="admin-header-sep">|</span>
          <a href="#" class="admin-sign-out-btn" id="adminAuthBtn">
            <span id="adminAuthBtnText">Sign Out</span>
            <svg viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 4v8" stroke="currentColor" stroke-width="2.5"/>
              <path d="M6.5 7.5a8 8 0 1 0 11 0" stroke="currentColor" stroke-width="2" fill="none"/>
            </svg>
          </a>
        </div>
      </div>

      <!-- Meltdown Popup Overlay -->
      <div class="meltdown-overlay" id="meltdownOverlay">
        <div class="meltdown-popup" id="meltdownPopup">
          <div class="meltdown-text" id="meltdownText">AI REACTOR MELTDOWN IMMINENT</div>
        </div>
      </div>

      <!-- Admin Content - Dashboard View (default) -->
      <div class="admin-content view-dashboard">
        <!-- Left Button Column -->
        <div class="admin-button-column" style="margin-left: 60px;">
          <button class="admin-btn" id="adminBtnJubilee" data-persona-slug="jubilee">
            <img src="/images/personas/jubilee.png" alt="Jubilee" class="admin-btn__avatar">
            <span class="admin-btn__name">Jubilee Inspire</span>
            <span class="admin-btn__count" id="personaCount-jubilee">0</span>
          </button>
          <button class="admin-btn" id="adminBtnMelody" data-persona-slug="melody">
            <img src="/images/personas/melody.png" alt="Melody" class="admin-btn__avatar">
            <span class="admin-btn__name">Melody Inspire</span>
            <span class="admin-btn__count" id="personaCount-melody">0</span>
          </button>
          <button class="admin-btn" id="adminBtnZariah" data-persona-slug="zariah">
            <img src="/images/personas/zariah.png" alt="Zariah" class="admin-btn__avatar">
            <span class="admin-btn__name">Zariah Inspire</span>
            <span class="admin-btn__count" id="personaCount-zariah">0</span>
          </button>
          <button class="admin-btn" id="adminBtnEliana" data-persona-slug="eliana">
            <img src="/images/personas/eliana.png" alt="Eliana" class="admin-btn__avatar">
            <span class="admin-btn__name">Eliana Inspire</span>
            <span class="admin-btn__count" id="personaCount-eliana">0</span>
          </button>
          <button class="admin-btn" id="adminBtnImani" data-persona-slug="imani">
            <img src="/images/personas/imani.png" alt="Imani" class="admin-btn__avatar">
            <span class="admin-btn__name">Imani Inspire</span>
            <span class="admin-btn__count" id="personaCount-imani">0</span>
          </button>
          <button class="admin-btn" id="adminBtnNova" data-persona-slug="nova">
            <img src="/images/personas/nova.png" alt="Nova" class="admin-btn__avatar">
            <span class="admin-btn__name">Nova Inspire</span>
            <span class="admin-btn__count" id="personaCount-nova">0</span>
          </button>
        </div>

        <!-- Center Panel with Visualizer -->
        <div class="admin-center-panel">
          <div class="admin-center-panel__content">
            <!-- Info Panel with 5 buttons (above visualizer) -->
            <div class="admin-info-panel admin-info-panel--top">
              <button class="admin-info-box admin-info-box--branding" id="inspireKingdomBuilderTop">
                <div class="admin-info-box__icon">üëë</div>
                <span class="admin-info-box__title">INSPIRE 8.0</span>
                <span class="admin-info-box__value">Kingdom Builder</span>
              </button>
              <button class="admin-info-box admin-info-box--branding" id="inspireCreativeFireTop">
                <div class="admin-info-box__icon">üî•</div>
                <span class="admin-info-box__title">INSPIRE 8.0</span>
                <span class="admin-info-box__value">Creative Fire</span>
              </button>
              <button class="admin-info-box admin-info-box--branding" id="inspireGospelPulseTop">
                <div class="admin-info-box__icon">‚ú®</div>
                <span class="admin-info-box__title">INSPIRE 8.0</span>
                <span class="admin-info-box__value">Gospel Pulse</span>
              </button>
              <button class="admin-info-box admin-info-box--branding" id="inspireShepherdVoiceTop">
                <div class="admin-info-box__icon">üõ°Ô∏è</div>
                <span class="admin-info-box__title">INSPIRE 8.0</span>
                <span class="admin-info-box__value">Shepherd Voice</span>
              </button>
              <button class="admin-info-box admin-info-box--branding" id="inspireHebraicRootsTop">
                <div class="admin-info-box__icon">üìú</div>
                <span class="admin-info-box__title">INSPIRE 8.0</span>
                <span class="admin-info-box__value">Hebraic Roots</span>
              </button>
            </div>
            <div class="visualizer-container">
              <canvas id="visualizer"></canvas>
            </div>
            <!-- Bottom section: Analytics + TOKENIZER boxes -->
            <div class="admin-bottom-section">
              <!-- Analytics Summary Row -->
              <div class="admin-analytics-row">
                <span class="admin-analytics-text">
                  <span class="admin-analytics-text__label">USERS:</span>
                  <span class="admin-analytics-text__value" id="analyticsSubscribedCount">0</span>/<span class="admin-analytics-text__value" id="analyticsFreeCount">0</span>
                  <span class="admin-analytics-text__revenue" id="analyticsRevenue">($0.00)</span>
                </span>
                <span class="admin-analytics-text">
                  <span class="admin-analytics-text__label">TOKENS:</span>
                  <span class="admin-analytics-text__value" id="analyticsTotalTokens">0</span>
                  <span class="admin-analytics-text__cost" id="analyticsTokenCost">($0.00)</span>
                </span>
              </div>
              <!-- Info Panel with 5 buttons (below visualizer) -->
              <div class="admin-info-panel">
              <button class="admin-info-box admin-info-box--branding" id="inspireKingdomBuilder">
                <div class="ai-status-indicator checking" id="openaiStatusIndicator" title="Checking OpenAI status..."></div>
                <div class="admin-info-box__icon admin-info-box__icon--logo">
                  <svg viewBox="0 0 24 24" fill="#000"><path d="M22.2819 9.8211a5.9847 5.9847 0 0 0-.5157-4.9108 6.0462 6.0462 0 0 0-6.5098-2.9A6.0651 6.0651 0 0 0 4.9807 4.1818a5.9847 5.9847 0 0 0-3.9977 2.9 6.0462 6.0462 0 0 0 .7427 7.0966 5.98 5.98 0 0 0 .511 4.9107 6.051 6.051 0 0 0 6.5146 2.9001A5.9847 5.9847 0 0 0 13.2599 24a6.0557 6.0557 0 0 0 5.7718-4.2058 5.9894 5.9894 0 0 0 3.9977-2.9001 6.0557 6.0557 0 0 0-.7475-7.0729zm-9.022 12.6081a4.4755 4.4755 0 0 1-2.8764-1.0408l.1419-.0804 4.7783-2.7582a.7948.7948 0 0 0 .3927-.6813v-6.7369l2.02 1.1686a.071.071 0 0 1 .038.052v5.5826a4.504 4.504 0 0 1-4.4945 4.4944zm-9.6607-4.1254a4.4708 4.4708 0 0 1-.5346-3.0137l.142.0852 4.783 2.7582a.7712.7712 0 0 0 .7806 0l5.8428-3.3685v2.3324a.0804.0804 0 0 1-.0332.0615L9.74 19.9502a4.4992 4.4992 0 0 1-6.1408-1.6464zM2.3408 7.8956a4.485 4.485 0 0 1 2.3655-1.9728V11.6a.7664.7664 0 0 0 .3879.6765l5.8144 3.3543-2.0201 1.1685a.0757.0757 0 0 1-.071 0l-4.8303-2.7865A4.504 4.504 0 0 1 2.3408 7.872zm16.5963 3.8558L13.1038 8.364l2.0201-1.1685a.0757.0757 0 0 1 .071 0l4.8303 2.7913a4.4944 4.4944 0 0 1-.6765 8.1042v-5.6772a.79.79 0 0 0-.4069-.6813zm2.0107-3.0231l-.142-.0852-4.7735-2.7818a.7759.7759 0 0 0-.7854 0L9.409 9.2297V6.8974a.0662.0662 0 0 1 .0284-.0615l4.8303-2.7866a4.4992 4.4992 0 0 1 6.6802 4.66zM8.3065 12.863l-2.02-1.1638a.0804.0804 0 0 1-.038-.0567V6.0742a4.4992 4.4992 0 0 1 7.3757-3.4537l-.142.0805L8.704 5.459a.7948.7948 0 0 0-.3927.6813zm1.0976-2.3654l2.602-1.4998 2.6069 1.4998v2.9994l-2.5974 1.4997-2.6067-1.4997z"/></svg>
                </div>
                <span class="admin-info-box__title">TOKENIZER</span>
                <span class="admin-info-box__value">OpenAI GPT</span>
              </button>
              <button class="admin-info-box admin-info-box--branding" id="inspireCreativeFire">
                <div class="ai-status-indicator checking" id="claudeStatusIndicator" title="Checking Claude status..."></div>
                <div class="admin-info-box__icon admin-info-box__icon--logo">
                  <svg viewBox="0 0 24 24" fill="#000"><path d="M4.709 15.955l4.72-2.647.08-.23-.08-.128H4.08v-.08l2.7-1.778.558-.503-.375-.51-2.29-2.18h.463l2.93 1.593h.16l.065-.136-.463-3.473.16-.08 2.132 2.597.398.217.39-.296 2.104-2.647.175.033-.311 3.577.024.168.2.096 2.79-1.577.16.08-2.133 2.101-.295.493.455.527 2.632 1.842v.08h-5.427l-.064.128.08.16 4.759 2.632v.096l-2.805-.192-.502.35.271.606 1.353 2.79-.16.064-2.196-2.358-.455-.128-.424.35-.048 3.266-.16.048-1.857-2.95-.423-.383-.455.296-2.213 2.316-.144-.048.48-3.186-.096-.287-.303-.08-2.79.191v-.08z"/></svg>
                </div>
                <span class="admin-info-box__title">TOKENIZER</span>
                <span class="admin-info-box__value">Claude</span>
              </button>
              <button class="admin-info-box admin-info-box--branding" id="inspireGospelPulse">
                <div class="admin-info-box__icon admin-info-box__icon--logo">
                  <svg viewBox="0 0 24 24" fill="#000"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
                </div>
                <span class="admin-info-box__title">TOKENIZER</span>
                <span class="admin-info-box__value">Gemini</span>
              </button>
              <button class="admin-info-box admin-info-box--branding" id="inspireShepherdVoice">
                <div class="admin-info-box__icon admin-info-box__icon--logo">
                  <svg viewBox="0 0 24 24" fill="#000"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
                </div>
                <span class="admin-info-box__title">TOKENIZER</span>
                <span class="admin-info-box__value">Copilot</span>
              </button>
              <button class="admin-info-box admin-info-box--branding" id="inspireHebraicRoots">
                <div class="ai-status-indicator checking" id="grokStatusIndicator" title="Checking Grok status..."></div>
                <div class="admin-info-box__icon admin-info-box__icon--logo">
                  <svg viewBox="0 0 24 24" fill="#000"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                </div>
                <span class="admin-info-box__title">TOKENIZER</span>
                <span class="admin-info-box__value">Grok</span>
              </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Right Button Column -->
        <div class="admin-button-column" style="margin-right: 60px;">
          <button class="admin-btn" id="adminBtnElias" data-persona-slug="elias">
            <img src="/images/personas/elias.png" alt="Elias" class="admin-btn__avatar">
            <span class="admin-btn__name">Elias Inspire</span>
            <span class="admin-btn__count" id="personaCount-elias">0</span>
          </button>
          <button class="admin-btn" id="adminBtnCaleb" data-persona-slug="caleb">
            <img src="/images/personas/caleb.png" alt="Caleb" class="admin-btn__avatar">
            <span class="admin-btn__name">Caleb Inspire</span>
            <span class="admin-btn__count" id="personaCount-caleb">0</span>
          </button>
          <button class="admin-btn" id="adminBtnZev" data-persona-slug="zev">
            <img src="/images/personas/zev.png" alt="Zev" class="admin-btn__avatar">
            <span class="admin-btn__name">Zev Inspire</span>
            <span class="admin-btn__count" id="personaCount-zev">0</span>
          </button>
          <button class="admin-btn" id="adminBtnAmir" data-persona-slug="amir">
            <img src="/images/personas/amir.png" alt="Amir" class="admin-btn__avatar">
            <span class="admin-btn__name">Amir Inspire</span>
            <span class="admin-btn__count" id="personaCount-amir">0</span>
          </button>
          <button class="admin-btn" id="adminBtnSantiago" data-persona-slug="santiago">
            <img src="/images/personas/santiago.png" alt="Santiago" class="admin-btn__avatar">
            <span class="admin-btn__name">Santiago Inspire</span>
            <span class="admin-btn__count" id="personaCount-santiago">0</span>
          </button>
          <button class="admin-btn" id="adminBtnTahoma" data-persona-slug="tahoma">
            <img src="/images/personas/tahoma.png" alt="Tahoma" class="admin-btn__avatar">
            <span class="admin-btn__name">Tahoma Inspire</span>
            <span class="admin-btn__count" id="personaCount-tahoma">0</span>
          </button>
        </div>
      </div>

      <!-- Right Control Panel - Fixed at far right edge of viewport -->
      <!-- Navigation for Views: Analytics (primary), Personas, Models -->
      <!-- This is outside the admin-content divs since it's position:fixed -->
      <div class="dashboard-control-panel">
        <!-- Analytics View (Primary - shows visualizer and analytics dashboard) -->
        <button class="control-btn active" data-view="dashboard" onclick="switchToDashboardView('dashboard')" title="Analytics - Dashboard Overview">
          <svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/></svg>
          <span class="control-btn-label">Analytics</span>
        </button>
        <!-- Collections View (Secondary - navigates to collection management page) -->
        <a href="/admin/collections" class="control-btn" title="Collections - System Collection Management">
          <svg viewBox="0 0 24 24"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H8V4h12v12z"/></svg>
          <span class="control-btn-label">Collections</span>
        </a>
        <!-- Models View (Third - shows AI model configurations) -->
        <button class="control-btn" data-view="models" onclick="switchToDashboardView('models')" title="Models - AI Model Configuration">
          <svg viewBox="0 0 24 24"><path d="M22.2819 9.8211a5.9847 5.9847 0 0 0-.5157-4.9108 6.0462 6.0462 0 0 0-6.5098-2.9A6.0651 6.0651 0 0 0 4.9807 4.1818a5.9847 5.9847 0 0 0-3.9977 2.9 6.0462 6.0462 0 0 0 .7427 7.0966 5.98 5.98 0 0 0 .511 4.9107 6.051 6.051 0 0 0 6.5146 2.9001A5.9847 5.9847 0 0 0 13.2599 24a6.0557 6.0557 0 0 0 5.7718-4.2058 5.9894 5.9894 0 0 0 3.9977-2.9001 6.0557 6.0557 0 0 0-.7475-7.0729z"/></svg>
          <span class="control-btn-label">Models</span>
        </button>
        <!-- JSV Bible View (Fourth - shows JSV Bible content) -->
        <button class="control-btn" data-view="jsv-bible" onclick="switchToDashboardView('jsv-bible')" title="JSV Bible - Jubilee Standard Version">
          <svg viewBox="0 0 24 24"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"/></svg>
          <span class="control-btn-label">JSV Bible</span>
        </button>
        <!-- Knowledgebase View (Fifth - shows knowledge management) -->
        <button class="control-btn" data-view="knowledgebase" onclick="switchToDashboardView('knowledgebase')" title="Knowledgebase - Knowledge Management">
          <svg viewBox="0 0 24 24"><path d="M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z"/></svg>
          <span class="control-btn-label">Knowledgebase</span>
        </button>
        <!-- Safety Test Button - anchored at bottom -->
        <button class="safety-test-btn" id="safetyTestBtn" title="Safety Test - AI Reactor Meltdown Simulation">
          <svg viewBox="0 0 24 24"><path d="M12 2L4 5v6.09c0 5.05 3.41 9.76 8 10.91 4.59-1.15 8-5.86 8-10.91V5l-8-3zm-1.06 13.54L7.4 12l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41-5.64 5.66z"/></svg>
          <span class="control-btn-label">Safety Test</span>
        </button>
      </div>

      <!-- Personas View Container (hidden by default) -->
      <div class="admin-content view-personas">
        <div class="personas-management">
          <div class="personas-header">
            <h2 class="personas-title">
              <svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
              AI Personas
            </h2>
          </div>
          <div class="personas-grid" id="personasGrid">
            <!-- Personas will be loaded dynamically -->
          </div>
        </div>
      </div>

      <!-- Models View Container (hidden by default) -->
      <div class="admin-content view-models">
        <div class="models-management">
          <div class="models-header">
            <h2 class="models-title">
              <svg viewBox="0 0 24 24"><path d="M22.2819 9.8211a5.9847 5.9847 0 0 0-.5157-4.9108 6.0462 6.0462 0 0 0-6.5098-2.9A6.0651 6.0651 0 0 0 4.9807 4.1818a5.9847 5.9847 0 0 0-3.9977 2.9 6.0462 6.0462 0 0 0 .7427 7.0966 5.98 5.98 0 0 0 .511 4.9107 6.051 6.051 0 0 0 6.5146 2.9001A5.9847 5.9847 0 0 0 13.2599 24a6.0557 6.0557 0 0 0 5.7718-4.2058 5.9894 5.9894 0 0 0 3.9977-2.9001 6.0557 6.0557 0 0 0-.7475-7.0729z"/></svg>
              AI Models
            </h2>
          </div>
          <div class="models-grid" id="modelsGrid">
            <!-- Models will be loaded dynamically -->
          </div>
        </div>
      </div>

      <!-- JSV Bible View Container (hidden by default) -->
      <div class="admin-content view-jsv-bible">
        <div class="jsv-bible-management">
          <div class="jsv-bible-header">
            <h2 class="jsv-bible-title">
              <svg viewBox="0 0 24 24" style="width: 28px; height: 28px; fill: #ffbd59; margin-right: 12px;"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"/></svg>
              JSV Bible - Jubilee Standard Version
            </h2>
          </div>
          <div class="jsv-bible-content">
            <div class="jsv-bible-sidebar">
              <h3 style="color: #ffbd59; font-size: 14px; margin-bottom: 12px;">Books of the Bible</h3>
              <div class="jsv-book-list" id="jsvBookList">
                <div class="jsv-book-item active">Genesis</div>
                <div class="jsv-book-item">Exodus</div>
                <div class="jsv-book-item">Leviticus</div>
                <div class="jsv-book-item">Numbers</div>
                <div class="jsv-book-item">Deuteronomy</div>
                <div class="jsv-book-item">Joshua</div>
                <div class="jsv-book-item">Judges</div>
                <div class="jsv-book-item">Ruth</div>
                <div class="jsv-book-item">1 Samuel</div>
                <div class="jsv-book-item">2 Samuel</div>
                <div class="jsv-book-item">Psalms</div>
                <div class="jsv-book-item">Proverbs</div>
                <div class="jsv-book-item">Isaiah</div>
                <div class="jsv-book-item">Matthew</div>
                <div class="jsv-book-item">Mark</div>
                <div class="jsv-book-item">Luke</div>
                <div class="jsv-book-item">John</div>
                <div class="jsv-book-item">Acts</div>
                <div class="jsv-book-item">Romans</div>
                <div class="jsv-book-item">Revelation</div>
              </div>
            </div>
            <div class="jsv-bible-main">
              <div style="color: #888; text-align: center; padding: 60px 20px;">
                <svg viewBox="0 0 24 24" style="width: 64px; height: 64px; fill: #444; margin-bottom: 16px;"><path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"/></svg>
                <p style="font-size: 16px; margin-bottom: 8px;">Select a book to begin reading</p>
                <p style="font-size: 13px; color: #666;">The Jubilee Standard Version brings clarity to Scripture with modern language and Hebraic context.</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Knowledgebase View Container (hidden by default) -->
      <div class="admin-content view-knowledgebase">
        <div class="knowledgebase-management">
          <div class="knowledgebase-header">
            <h2 class="knowledgebase-title">
              <svg viewBox="0 0 24 24" style="width: 28px; height: 28px; fill: #ffbd59; margin-right: 12px;"><path d="M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z"/></svg>
              Knowledgebase
            </h2>
            <button class="admin-btn" style="padding: 8px 16px; font-size: 13px;">
              <svg viewBox="0 0 24 24" style="width: 16px; height: 16px; fill: currentColor; margin-right: 6px;"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
              Add Entry
            </button>
          </div>
          <div class="knowledgebase-content" id="knowledgebaseGrid">
            <div class="knowledge-card">
              <div class="knowledge-card-icon">
                <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
              </div>
              <div class="knowledge-card-title">Doctrines & Beliefs</div>
              <div class="knowledge-card-desc">Core theological concepts and faith foundations for the JubileeVerse platform.</div>
              <div class="knowledge-card-count">24 entries</div>
            </div>
            <div class="knowledge-card">
              <div class="knowledge-card-icon">
                <svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>
              </div>
              <div class="knowledge-card-title">Scripture References</div>
              <div class="knowledge-card-desc">Curated Bible passages and commentary for persona responses.</div>
              <div class="knowledge-card-count">156 entries</div>
            </div>
            <div class="knowledge-card">
              <div class="knowledge-card-icon">
                <svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
              </div>
              <div class="knowledge-card-title">Persona Guidelines</div>
              <div class="knowledge-card-desc">Behavior patterns and response templates for AI personas.</div>
              <div class="knowledge-card-count">12 entries</div>
            </div>
            <div class="knowledge-card">
              <div class="knowledge-card-icon">
                <svg viewBox="0 0 24 24"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
              </div>
              <div class="knowledge-card-title">Training Data</div>
              <div class="knowledge-card-desc">Fine-tuning datasets and example conversations for model training.</div>
              <div class="knowledge-card-count">89 entries</div>
            </div>
            <div class="knowledge-card">
              <div class="knowledge-card-icon">
                <svg viewBox="0 0 24 24"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/></svg>
              </div>
              <div class="knowledge-card-title">Hospitality Rules</div>
              <div class="knowledge-card-desc">Engagement triggers and welcome message configurations.</div>
              <div class="knowledge-card-count">8 entries</div>
            </div>
            <div class="knowledge-card">
              <div class="knowledge-card-icon">
                <svg viewBox="0 0 24 24"><path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>
              </div>
              <div class="knowledge-card-title">FAQ Database</div>
              <div class="knowledge-card-desc">Common questions and pre-approved answers for quick responses.</div>
              <div class="knowledge-card-count">42 entries</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    document.addEventListener('DOMContentLoaded', async function() {
      // Check if user has admin rights
      try {
        const response = await fetch('/auth/me');
        const data = await response.json();

        if (!data.success || !data.user || data.user.role !== 'admin') {
          window.location.href = '/';
          return;
        }

        // Display username in header (First and Last Name)
        const adminUserName = document.getElementById('adminUserName');
        if (adminUserName && data.user.displayName) {
          adminUserName.textContent = data.user.displayName;
        }
      } catch (error) {
        console.error('Failed to verify admin access:', error);
        window.location.href = '/';
      }

      // Admin sign out functionality
      const adminAuthBtn = document.getElementById('adminAuthBtn');
      if (adminAuthBtn) {
        adminAuthBtn.addEventListener('click', function(e) {
          e.preventDefault();
          fetch('/auth/logout', {
            method: 'POST',
            headers: { 'Accept': 'application/json' }
          }).then(function() {
            window.location.href = '/login';
          });
        });
      }

      // ============================================================
      // VIEW SWITCHING - Dashboard, Personas, Models
      // ============================================================
      // Set initial view to dashboard
      document.body.classList.add('dashboard-view-active');

      // Load personas data for Personas view
      loadPersonasData();

      // Load models data for Models view
      loadModelsData();

      // ============================================================
      // SAFETY TEST - AI REACTOR MELTDOWN SIMULATION
      // ============================================================
      const safetyTestBtn = document.getElementById('safetyTestBtn');
      const meltdownOverlay = document.getElementById('meltdownOverlay');
      const meltdownPopup = document.getElementById('meltdownPopup');
      const meltdownText = document.getElementById('meltdownText');

      if (safetyTestBtn && meltdownOverlay) {
        safetyTestBtn.addEventListener('click', function(e) {
          e.preventDefault();
          runMeltdownSequence();
        });
      }

      async function runMeltdownSequence() {
        // Reset state
        meltdownPopup.classList.remove('safe');
        meltdownText.textContent = 'AI REACTOR MELTDOWN IMMINENT';

        // Show overlay
        meltdownOverlay.classList.add('active');

        // Flash for 7 seconds total (slowed down by 50% - 750ms per flash cycle)
        const flashDuration = 7000;
        const flashInterval = 750;
        const flashCount = Math.floor(flashDuration / flashInterval);

        for (let i = 0; i < flashCount; i++) {
          meltdownText.classList.add('flashing');
          await new Promise(resolve => setTimeout(resolve, 375));
          meltdownText.classList.remove('flashing');
          await new Promise(resolve => setTimeout(resolve, 375));
        }

        // Change to safety protocols message
        meltdownPopup.classList.add('safe');
        meltdownText.textContent = 'MELTDOWN SAFETY PROTOCOLS INITIATED';

        // Display for 3 seconds then hide
        await new Promise(resolve => setTimeout(resolve, 3000));

        // Fade out
        meltdownOverlay.classList.remove('active');
      }

      // ============================================================
      // LOAD DASHBOARD ANALYTICS
      // ============================================================
      async function loadDashboardAnalytics() {
        try {
          const response = await fetch('/api/admin/analytics/dashboard', {
            credentials: 'include',
            headers: { 'Accept': 'application/json' }
          });

          if (response.ok) {
            const data = await response.json();
            if (data.success && data.analytics) {
              const analytics = data.analytics;

              // Update user counts
              document.getElementById('analyticsSubscribedCount').textContent =
                analytics.subscribedUsers.toLocaleString();
              document.getElementById('analyticsFreeCount').textContent =
                analytics.freeUsers.toLocaleString();

              // Format revenue (cents to dollars)
              const revenueStr = (analytics.monthlyRevenueCents / 100).toFixed(2);
              document.getElementById('analyticsRevenue').textContent = `($${revenueStr})`;

              // Update token counts
              document.getElementById('analyticsTotalTokens').textContent =
                analytics.totalTokens.toLocaleString();

              // Format token cost (cents to dollars, 4 decimal places)
              const costStr = (analytics.totalCostCents / 100).toFixed(4);
              document.getElementById('analyticsTokenCost').textContent = `($${costStr})`;
            }
          }
        } catch (error) {
          console.error('Failed to load dashboard analytics:', error);
        }
      }

      // Load analytics on page load
      loadDashboardAnalytics();

      // Refresh analytics every 15 seconds for real-time updates
      setInterval(loadDashboardAnalytics, 15000);

      // ============================================================
      // LOAD PERSONA RESPONSE COUNTS
      // ============================================================
      async function loadPersonaStats() {
        try {
          const response = await fetch('/api/admin/analytics/personas', {
            credentials: 'include',
            headers: { 'Accept': 'application/json' }
          });

          if (response.ok) {
            const data = await response.json();
            if (data.success && data.personas) {
              // Update each persona's count display
              data.personas.forEach(persona => {
                const countElement = document.getElementById(`personaCount-${persona.slug}`);
                if (countElement) {
                  countElement.textContent = persona.responseCount.toLocaleString();
                }
              });
            }
          }
        } catch (error) {
          console.error('Failed to load persona stats:', error);
        }
      }

      // Load persona stats on page load
      loadPersonaStats();

      // Refresh persona stats every 15 seconds (same as analytics)
      setInterval(loadPersonaStats, 15000);

      // ============================================================
      // AI STATUS INDICATOR - Monitor API health
      // ============================================================
      let aiStatusInterval = null;
      let hasAIError = false;

      async function checkAIStatus() {
        const openaiIndicator = document.getElementById('openaiStatusIndicator');
        const claudeIndicator = document.getElementById('claudeStatusIndicator');
        const grokIndicator = document.getElementById('grokStatusIndicator');

        if (!openaiIndicator && !claudeIndicator && !grokIndicator) return;

        try {
          const response = await fetch('/api/admin/ai/status', {
            method: 'GET',
            credentials: 'include',
            headers: { 'Content-Type': 'application/json' }
          });

          if (!response.ok) {
            throw new Error('Failed to fetch AI status');
          }

          const data = await response.json();
          let anyError = false;

          // Update OpenAI indicator
          if (openaiIndicator) {
            openaiIndicator.classList.remove('checking', 'healthy', 'unhealthy', 'backup');
            if (data.openai.healthy) {
              if (data.openai.usingBackup) {
                openaiIndicator.classList.add('backup');
                openaiIndicator.title = 'OpenAI: Using backup key';
              } else {
                openaiIndicator.classList.add('healthy');
                openaiIndicator.title = 'OpenAI: Healthy';
              }
            } else {
              openaiIndicator.classList.add('unhealthy');
              openaiIndicator.title = 'OpenAI: ' + (data.openai.error || 'Unhealthy');
              anyError = true;
            }
          }

          // Update Claude indicator
          if (claudeIndicator) {
            claudeIndicator.classList.remove('checking', 'healthy', 'unhealthy', 'backup');
            if (data.claude.healthy) {
              claudeIndicator.classList.add('healthy');
              claudeIndicator.title = 'Claude: Healthy';
            } else {
              claudeIndicator.classList.add('unhealthy');
              claudeIndicator.title = 'Claude: ' + (data.claude.error || 'Unhealthy');
              anyError = true;
            }
          }

          // Update Grok indicator
          if (grokIndicator) {
            grokIndicator.classList.remove('checking', 'healthy', 'unhealthy', 'backup');
            if (data.grok.healthy) {
              grokIndicator.classList.add('healthy');
              grokIndicator.title = 'Grok: Healthy';
            } else {
              grokIndicator.classList.add('unhealthy');
              grokIndicator.title = 'Grok: ' + (data.grok.error || 'Unhealthy');
              anyError = true;
            }
          }

          // Adjust polling interval based on error state
          if (anyError !== hasAIError) {
            hasAIError = anyError;
            updateAIStatusInterval();
          }

        } catch (error) {
          console.error('Error checking AI status:', error);
          // Set to unhealthy on fetch error
          if (openaiIndicator) {
            openaiIndicator.classList.remove('checking', 'healthy', 'backup');
            openaiIndicator.classList.add('unhealthy');
            openaiIndicator.title = 'OpenAI: Status check failed';
          }
          if (claudeIndicator) {
            claudeIndicator.classList.remove('checking', 'healthy', 'backup');
            claudeIndicator.classList.add('unhealthy');
            claudeIndicator.title = 'Claude: Status check failed';
          }
          if (grokIndicator) {
            grokIndicator.classList.remove('checking', 'healthy', 'backup');
            grokIndicator.classList.add('unhealthy');
            grokIndicator.title = 'Grok: Status check failed';
          }
          // On fetch error, poll more frequently
          if (!hasAIError) {
            hasAIError = true;
            updateAIStatusInterval();
          }
        }
      }

      function updateAIStatusInterval() {
        if (aiStatusInterval) {
          clearInterval(aiStatusInterval);
        }
        // Poll every 5 minutes if there's an error, otherwise every hour
        const interval = hasAIError ? 300000 : 3600000;
        aiStatusInterval = setInterval(checkAIStatus, interval);
      }

      // Check AI status on page load
      checkAIStatus();

      // Initial interval: every hour (will switch to 5 min if errors detected)
      updateAIStatusInterval();

      // ============================================================
      // DIGITAL RING VISUALIZER - Gold/White Theme
      // ============================================================
      const COLOR_PALETTE = {
        gold: { r: 255, g: 215, b: 0, hex: '#ffd700' },
        brightYellow: { r: 255, g: 255, b: 0, hex: '#ffff00' },
        white: { r: 255, g: 255, b: 255, hex: '#ffffff' },
        brightBlue: { r: 0, g: 150, b: 255, hex: '#0096ff' },
        blue: { r: 0, g: 0, b: 255, hex: '#0000ff' },
        maroon: { r: 128, g: 0, b: 0, hex: '#800000' },
        red: { r: 255, g: 0, b: 0, hex: '#ff0000' },
        darkGreen: { r: 0, g: 100, b: 0, hex: '#006400' },
        lightGreen: { r: 144, g: 238, b: 144, hex: '#90ee90' },
        purple: { r: 128, g: 0, b: 128, hex: '#800080' },
        brightPurple: { r: 191, g: 0, b: 255, hex: '#bf00ff' },
        // AI Brand Colors
        openaiTeal: { r: 16, g: 163, b: 127, hex: '#10a37f' },
        claudeOrange: { r: 217, g: 119, b: 87, hex: '#d97757' },
        geminiBlue: { r: 66, g: 133, b: 244, hex: '#4285f4' },
        copilotBlue: { r: 0, g: 120, b: 212, hex: '#0078d4' },
        grokGray: { r: 128, g: 128, b: 128, hex: '#808080' }
      };

      let audioIntensity = 0;
      let targetIntensity = 0;
      let time = 0;
      const BASE_INTENSITY = 0.5;
      let colorTransitionPhase = 0;
      let colorTransitionSpeed = 0.0008;

      // Animation speed control - increases by 20% on button hover
      let animationSpeedMultiplier = 1.0;
      let targetSpeedMultiplier = 1.0;

      const canvas = document.getElementById('visualizer');
      const ctx = canvas.getContext('2d');

      // Current colors (interpolated towards targets)
      let primaryColor = { r: 255, g: 215, b: 0, hex: '#ffd700' };
      let secondaryColor = { r: 255, g: 255, b: 0, hex: '#ffff00' };
      // Target colors (set by hover events)
      let targetPrimaryColor = COLOR_PALETTE.gold;
      let targetSecondaryColor = COLOR_PALETTE.brightYellow;
      // Color transition speed (0.06 = normal, 0.036 = 40% slower)
      const COLOR_TRANSITION_SPEED = 0.036;
      // Lightning intensity multiplier (1.0 = normal, 1.7 = 70% increase for INSPIRE boxes)
      let lightningMultiplier = 1.0;
      // Red outer glow multiplier (1.0 = normal, 1.5 = 50% increase for bottom TOKENIZER boxes)
      let redGlowMultiplier = 1.0;

      const RING_CONFIG = {
        baseRadius: 127,
        voidRadius: 85,
        maxRadius: 120
      };

      const SIZE_CONFIG = {
        minSize: 0.3,
        maxSize: 3.0,
        mutationRate: 0.02,
        mutationSpeed: 0.1
      };

      function setupCanvas() {
        canvas.width = 650;
        canvas.height = 650;
        initParticles();
      }

      const ringParticles = [];
      const floatingDots = [];
      const sparkDots = [];
      const lightningBolts = [];

      function initParticles() {
        ringParticles.length = 0;
        floatingDots.length = 0;
        sparkDots.length = 0;
        lightningBolts.length = 0;

        for (let i = 0; i < 800; i++) {
          const angle = Math.random() * Math.PI * 2;
          const radiusOffset = (Math.random() - 0.5) * 45;
          const baseSize = SIZE_CONFIG.minSize + Math.random() * (SIZE_CONFIG.maxSize - SIZE_CONFIG.minSize);
          ringParticles.push({
            angle: angle,
            baseRadius: RING_CONFIG.baseRadius + radiusOffset,
            size: baseSize,
            targetSize: baseSize,
            speed: (Math.random() - 0.5) * 0.02,
            opacity: 0.3 + Math.random() * 0.7,
            glitchOffset: 0,
            pulsePhase: Math.random() * Math.PI * 2,
            layer: Math.floor(Math.random() * 3)
          });
        }

        for (let i = 0; i < 200; i++) {
          const angle = Math.random() * Math.PI * 2;
          const distance = 75 + Math.random() * 150;
          const baseSize = SIZE_CONFIG.minSize + Math.random() * (SIZE_CONFIG.maxSize - SIZE_CONFIG.minSize);
          floatingDots.push({
            x: Math.cos(angle) * distance,
            y: Math.sin(angle) * distance,
            vx: (Math.random() - 0.5) * 0.3,
            vy: (Math.random() - 0.5) * 0.3,
            size: baseSize,
            targetSize: baseSize,
            opacity: 0.2 + Math.random() * 0.5,
            pulsePhase: Math.random() * Math.PI * 2
          });
        }

        for (let i = 0; i < 60; i++) {
          sparkDots.push({
            angle: Math.random() * Math.PI * 2,
            radius: RING_CONFIG.baseRadius + (Math.random() - 0.5) * 60,
            size: 0.5 + Math.random() * 2.5,
            opacity: 0,
            targetOpacity: 0,
            timer: Math.random() * 100,
            duration: 0,
            useSecondary: Math.random() > 0.5
          });
        }

        for (let i = 0; i < 8; i++) {
          lightningBolts.push({
            active: false,
            timer: Math.random() * 200,
            duration: 0,
            segments: [],
            startAngle: 0,
            opacity: 0
          });
        }
      }

      function lerpColor(color1, color2, t) {
        return {
          r: Math.round(color1.r + (color2.r - color1.r) * t),
          g: Math.round(color1.g + (color2.g - color1.g) * t),
          b: Math.round(color1.b + (color2.b - color1.b) * t),
          hex: `rgb(${Math.round(color1.r + (color2.r - color1.r) * t)}, ${Math.round(color1.g + (color2.g - color1.g) * t)}, ${Math.round(color1.b + (color2.b - color1.b) * t)})`
        };
      }

      function getEffectiveColors() {
        const blend = (Math.sin(colorTransitionPhase) + 1) / 2;
        const blendedPrimary = lerpColor(primaryColor, secondaryColor, blend * 0.3);
        const blendedSecondary = lerpColor(secondaryColor, primaryColor, blend * 0.3);
        return { primary: blendedPrimary, secondary: blendedSecondary };
      }

      function getStaticColors() {
        return { primary: primaryColor, secondary: secondaryColor };
      }

      function shouldTransition(index) {
        return index % 2 === 0;
      }

      function drawCenterVoid(centerX, centerY) {
        const colors = getEffectiveColors();
        const voidRadius = RING_CONFIG.voidRadius + audioIntensity * 3;

        const voidGradient = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, voidRadius);
        voidGradient.addColorStop(0, 'rgba(0, 0, 0, 1)');
        voidGradient.addColorStop(0.7, 'rgba(0, 0, 0, 0.95)');
        voidGradient.addColorStop(1, 'rgba(0, 0, 0, 0.8)');

        ctx.beginPath();
        ctx.arc(centerX, centerY, voidRadius, 0, Math.PI * 2);
        ctx.fillStyle = voidGradient;
        ctx.fill();

        // Heartbeat pulsating yellow glow in center
        // Heartbeat pattern: quick double-beat then pause (lub-dub...lub-dub...)
        const heartbeatCycle = (time * 1.2) % (Math.PI * 2); // ~1 beat per second
        const beat1 = Math.max(0, Math.sin(heartbeatCycle * 4) * Math.exp(-heartbeatCycle * 0.8));
        const beat2 = Math.max(0, Math.sin((heartbeatCycle - 0.3) * 4) * Math.exp(-(heartbeatCycle - 0.3) * 0.8));
        const heartbeatIntensity = Math.max(beat1, beat2 * 0.7);

        const heartGlowRadius = voidRadius * 0.85;
        const heartGlowAlpha = 0.15 + heartbeatIntensity * 0.25;
        const heartGlowSize = heartGlowRadius * (1 + heartbeatIntensity * 0.3);

        const heartGlow = ctx.createRadialGradient(centerX, centerY, 0, centerX, centerY, heartGlowSize);
        heartGlow.addColorStop(0, `rgba(255, 215, 0, ${heartGlowAlpha * 1.2})`);
        heartGlow.addColorStop(0.4, `rgba(255, 200, 50, ${heartGlowAlpha * 0.8})`);
        heartGlow.addColorStop(0.7, `rgba(255, 180, 0, ${heartGlowAlpha * 0.4})`);
        heartGlow.addColorStop(1, 'transparent');

        ctx.beginPath();
        ctx.arc(centerX, centerY, heartGlowSize, 0, Math.PI * 2);
        ctx.fillStyle = heartGlow;
        ctx.fill();

        const innerGlow = ctx.createRadialGradient(centerX, centerY, voidRadius * 0.8, centerX, centerY, voidRadius);
        innerGlow.addColorStop(0, 'transparent');
        const glowAlpha = 0.1 + audioIntensity * 0.15;
        innerGlow.addColorStop(1, `rgba(${colors.primary.r}, ${colors.primary.g}, ${colors.primary.b}, ${glowAlpha})`);

        ctx.beginPath();
        ctx.arc(centerX, centerY, voidRadius, 0, Math.PI * 2);
        ctx.fillStyle = innerGlow;
        ctx.fill();
      }

      function drawRing(centerX, centerY) {
        const transitionColors = getEffectiveColors();
        const staticColors = getStaticColors();
        const speedMultiplier = (0.75 + audioIntensity * 0.5) * animationSpeedMultiplier;

        ringParticles.forEach((particle, index) => {
          const colors = shouldTransition(index) ? transitionColors : staticColors;
          particle.angle += particle.speed * speedMultiplier;

          if (Math.random() < SIZE_CONFIG.mutationRate) {
            particle.targetSize = SIZE_CONFIG.minSize + Math.random() * (SIZE_CONFIG.maxSize - SIZE_CONFIG.minSize);
          }
          particle.size += (particle.targetSize - particle.size) * SIZE_CONFIG.mutationSpeed;

          if (Math.random() < 0.02 * audioIntensity) {
            particle.glitchOffset = (Math.random() - 0.5) * 20 * audioIntensity;
          } else {
            particle.glitchOffset *= 0.9;
          }

          const radius = particle.baseRadius + Math.sin(time * 2 + particle.pulsePhase) * 5 * audioIntensity;
          const x = centerX + Math.cos(particle.angle) * radius + particle.glitchOffset;
          const y = centerY + Math.sin(particle.angle) * radius;

          const pulseOpacity = particle.opacity * (0.5 + 0.5 * Math.sin(time * 3 + particle.pulsePhase));
          const finalOpacity = pulseOpacity * (0.6 + audioIntensity * 0.4);

          ctx.beginPath();
          ctx.arc(x, y, particle.size * (1 + audioIntensity * 0.5), 0, Math.PI * 2);
          ctx.fillStyle = `rgba(${colors.primary.r}, ${colors.primary.g}, ${colors.primary.b}, ${finalOpacity})`;
          ctx.fill();

          if (particle.size > 1.5) {
            ctx.shadowBlur = 5 * audioIntensity;
            ctx.shadowColor = colors.primary.hex;
            ctx.beginPath();
            ctx.arc(x, y, particle.size * 0.5, 0, Math.PI * 2);
            ctx.fillStyle = colors.primary.hex;
            ctx.fill();
            ctx.shadowBlur = 0;
          }
        });

        ctx.beginPath();
        ctx.arc(centerX, centerY, RING_CONFIG.baseRadius, 0, Math.PI * 2);
        ctx.strokeStyle = `rgba(${transitionColors.primary.r}, ${transitionColors.primary.g}, ${transitionColors.primary.b}, ${0.4 + audioIntensity * 0.3})`;
        ctx.lineWidth = 2;
        ctx.shadowBlur = 10 + audioIntensity * 20;
        ctx.shadowColor = transitionColors.primary.hex;
        ctx.stroke();
        ctx.shadowBlur = 0;

        ctx.beginPath();
        ctx.arc(centerX, centerY, RING_CONFIG.baseRadius - 20, 0, Math.PI * 2);
        ctx.strokeStyle = `rgba(${transitionColors.secondary.r}, ${transitionColors.secondary.g}, ${transitionColors.secondary.b}, 0.15)`;
        ctx.lineWidth = 1;
        ctx.stroke();

        ctx.beginPath();
        ctx.arc(centerX, centerY, RING_CONFIG.baseRadius + 20, 0, Math.PI * 2);
        ctx.strokeStyle = `rgba(${transitionColors.secondary.r}, ${transitionColors.secondary.g}, ${transitionColors.secondary.b}, 0.15)`;
        ctx.lineWidth = 1;
        ctx.stroke();
      }

      function drawFloatingDots(centerX, centerY) {
        const transitionColors = getEffectiveColors();
        const staticColors = getStaticColors();
        const speedMultiplier = (0.6 + audioIntensity * 0.25) * animationSpeedMultiplier;

        floatingDots.forEach((dot, index) => {
          const colors = shouldTransition(index) ? transitionColors : staticColors;
          dot.x += dot.vx * speedMultiplier;
          dot.y += dot.vy * speedMultiplier;

          if (Math.random() < SIZE_CONFIG.mutationRate) {
            dot.targetSize = SIZE_CONFIG.minSize + Math.random() * (SIZE_CONFIG.maxSize - SIZE_CONFIG.minSize);
          }
          dot.size += (dot.targetSize - dot.size) * SIZE_CONFIG.mutationSpeed;

          const distance = Math.sqrt(dot.x * dot.x + dot.y * dot.y);
          if (distance > RING_CONFIG.maxRadius || distance < RING_CONFIG.voidRadius) {
            const targetDistance = RING_CONFIG.baseRadius;
            const angle = Math.atan2(dot.y, dot.x);
            dot.vx += (Math.cos(angle) * targetDistance - dot.x) * 0.001;
            dot.vy += (Math.sin(angle) * targetDistance - dot.y) * 0.001;
          }

          dot.vx *= 0.99;
          dot.vy *= 0.99;
          dot.vx += (Math.random() - 0.5) * 0.05;
          dot.vy += (Math.random() - 0.5) * 0.05;

          const pulse = 0.5 + 0.5 * Math.sin(time * 2 + dot.pulsePhase);
          const opacity = dot.opacity * pulse * (0.6 + audioIntensity * 0.4);

          const screenX = centerX + dot.x;
          const screenY = centerY + dot.y;
          const useColor = dot.pulsePhase > Math.PI ? colors.primary : colors.secondary;

          ctx.beginPath();
          ctx.arc(screenX, screenY, dot.size * (1 + audioIntensity * 0.3), 0, Math.PI * 2);
          ctx.fillStyle = `rgba(${useColor.r}, ${useColor.g}, ${useColor.b}, ${opacity})`;
          ctx.fill();
        });
      }

      function drawSparkDots(centerX, centerY) {
        const transitionColors = getEffectiveColors();
        const staticColors = getStaticColors();
        const spawnRate = 0.08;

        sparkDots.forEach((dot, index) => {
          const colors = shouldTransition(index) ? transitionColors : staticColors;
          dot.timer--;

          if (dot.timer <= 0 && dot.opacity < 0.1) {
            if (Math.random() < spawnRate) {
              dot.angle = Math.random() * Math.PI * 2;
              dot.radius = RING_CONFIG.baseRadius + (Math.random() - 0.5) * 70;
              dot.size = 0.5 + Math.random() * 3;
              dot.targetOpacity = 0.4 + Math.random() * 0.6;
              dot.duration = 10 + Math.random() * 30;
              dot.useSecondary = Math.random() > 0.5;
            }
            dot.timer = 5 + Math.random() * 20;
          }

          if (dot.duration > 0) {
            dot.opacity += (dot.targetOpacity - dot.opacity) * 0.2;
            dot.duration--;
          } else {
            dot.targetOpacity = 0;
            dot.opacity += (dot.targetOpacity - dot.opacity) * 0.15;
          }

          if (dot.opacity > 0.02) {
            const x = centerX + Math.cos(dot.angle) * dot.radius;
            const y = centerY + Math.sin(dot.angle) * dot.radius;
            const useColor = dot.useSecondary ? colors.secondary : colors.primary;

            ctx.beginPath();
            ctx.arc(x, y, dot.size, 0, Math.PI * 2);
            ctx.fillStyle = `rgba(${useColor.r}, ${useColor.g}, ${useColor.b}, ${dot.opacity})`;
            ctx.fill();

            if (dot.opacity > 0.5 && dot.size > 1.5) {
              ctx.shadowBlur = 8;
              ctx.shadowColor = useColor.hex;
              ctx.beginPath();
              ctx.arc(x, y, dot.size * 0.6, 0, Math.PI * 2);
              ctx.fillStyle = `rgba(255, 255, 255, ${dot.opacity * 0.5})`;
              ctx.fill();
              ctx.shadowBlur = 0;
            }
          }
        });
      }

      function drawRadialLines(centerX, centerY) {
        const transitionColors = getEffectiveColors();
        const staticColors = getStaticColors();
        const lineCount = 36;
        const baseRadius = RING_CONFIG.voidRadius + 5;
        const maxRadius = RING_CONFIG.baseRadius + 35 + audioIntensity * 35;

        for (let i = 0; i < lineCount; i++) {
          const colors = shouldTransition(i) ? transitionColors : staticColors;
          const angle = (i / lineCount) * Math.PI * 2 + time * 0.1;
          const variation = Math.sin(time * 3 + i * 0.5) * audioIntensity * 15;
          const length = maxRadius + variation;

          const x1 = centerX + Math.cos(angle) * baseRadius;
          const y1 = centerY + Math.sin(angle) * baseRadius;
          const x2 = centerX + Math.cos(angle) * length;
          const y2 = centerY + Math.sin(angle) * length;

          const gradient = ctx.createLinearGradient(x1, y1, x2, y2);
          const useColor = i % 2 === 0 ? colors.primary : colors.secondary;
          gradient.addColorStop(0, `rgba(${useColor.r}, ${useColor.g}, ${useColor.b}, ${0.15 + audioIntensity * 0.15})`);
          gradient.addColorStop(1, 'transparent');

          ctx.beginPath();
          ctx.moveTo(x1, y1);
          ctx.lineTo(x2, y2);
          ctx.strokeStyle = gradient;
          ctx.lineWidth = 1;
          ctx.stroke();
        }
      }

      function drawArcSegments(centerX, centerY) {
        const transitionColors = getEffectiveColors();
        const staticColors = getStaticColors();
        const segmentCount = 8;
        const radius = RING_CONFIG.baseRadius + 8 + audioIntensity * 8;
        const arcLength = 0.12;
        const gap = (Math.PI * 2 - segmentCount * arcLength * Math.PI * 2) / segmentCount;

        for (let i = 0; i < segmentCount; i++) {
          const colors = shouldTransition(i) ? transitionColors : staticColors;
          const startAngle = i * (arcLength * Math.PI * 2 + gap) + time * (i % 2 === 0 ? 0.25 : -0.25);
          const endAngle = startAngle + arcLength * Math.PI * 2;
          const useColor = i % 2 === 0 ? colors.primary : colors.secondary;

          ctx.beginPath();
          ctx.arc(centerX, centerY, radius, startAngle, endAngle);
          ctx.strokeStyle = `rgba(${useColor.r}, ${useColor.g}, ${useColor.b}, ${0.3 + audioIntensity * 0.3})`;
          ctx.lineWidth = 2.5;
          ctx.lineCap = 'round';
          ctx.shadowBlur = 4 + audioIntensity * 8;
          ctx.shadowColor = useColor.hex;
          ctx.stroke();
          ctx.shadowBlur = 0;
        }

        const innerRadius = RING_CONFIG.baseRadius - 25;
        for (let i = 0; i < segmentCount; i++) {
          const colors = shouldTransition(i) ? transitionColors : staticColors;
          const startAngle = i * (arcLength * Math.PI * 2 + gap) + time * (i % 2 === 0 ? -0.15 : 0.15);
          const endAngle = startAngle + arcLength * Math.PI * 2 * 0.6;
          const useColor = i % 2 === 0 ? colors.secondary : colors.primary;

          ctx.beginPath();
          ctx.arc(centerX, centerY, innerRadius, startAngle, endAngle);
          ctx.strokeStyle = `rgba(${useColor.r}, ${useColor.g}, ${useColor.b}, ${0.2 + audioIntensity * 0.2})`;
          ctx.lineWidth = 1.5;
          ctx.lineCap = 'round';
          ctx.stroke();
        }
      }

      function drawOuterGlow(centerX, centerY) {
        const colors = getEffectiveColors();
        const glowRadius = RING_CONFIG.maxRadius + audioIntensity * 40;

        const gradient = ctx.createRadialGradient(centerX, centerY, RING_CONFIG.voidRadius, centerX, centerY, glowRadius);
        gradient.addColorStop(0, 'transparent');
        gradient.addColorStop(0.5, `rgba(${colors.primary.r}, ${colors.primary.g}, ${colors.primary.b}, ${0.05 + audioIntensity * 0.1})`);
        gradient.addColorStop(0.75, `rgba(${colors.secondary.r}, ${colors.secondary.g}, ${colors.secondary.b}, ${0.02 + audioIntensity * 0.05})`);
        gradient.addColorStop(1, 'transparent');

        ctx.beginPath();
        ctx.arc(centerX, centerY, glowRadius, 0, Math.PI * 2);
        ctx.fillStyle = gradient;
        ctx.fill();
      }

      function drawRedOuterRimGlow(centerX, centerY) {
        // Pulsating intensity - slow breathing in and out
        const pulseSpeed = 0.4; // Slow pulsation
        const pulseIntensity = (Math.sin(time * pulseSpeed) + 1) / 2; // 0 to 1

        // Base radius at outer rim
        const rimRadius = RING_CONFIG.baseRadius + 25;
        // Glow extends outward - 200% more (tripled from original 80-110 to 240-330)
        const glowExtent = 240 + pulseIntensity * 90;

        // Intensity reduction factor (75% less intense), multiplied by redGlowMultiplier for hover effects
        const intensityFactor = 0.25 * redGlowMultiplier;

        // Smooth uniform glow around the entire rim
        const glowOpacity = (0.12 + pulseIntensity * 0.15) * intensityFactor;
        const ringGradient = ctx.createRadialGradient(
          centerX, centerY, rimRadius - 5,
          centerX, centerY, rimRadius + glowExtent
        );
        ringGradient.addColorStop(0, 'transparent');
        ringGradient.addColorStop(0.15, `rgba(255, 60, 60, ${glowOpacity})`);
        ringGradient.addColorStop(0.4, `rgba(255, 40, 40, ${glowOpacity * 0.7})`);
        ringGradient.addColorStop(0.7, `rgba(200, 20, 20, ${glowOpacity * 0.3})`);
        ringGradient.addColorStop(1, 'transparent');

        ctx.beginPath();
        ctx.arc(centerX, centerY, rimRadius + glowExtent, 0, Math.PI * 2);
        ctx.fillStyle = ringGradient;
        ctx.fill();
      }

      function drawGrayPatternLayers(centerX, centerY) {
        const layerCount = 4;
        const startRadius = RING_CONFIG.voidRadius + 8;
        const endRadius = RING_CONFIG.baseRadius - 15;
        const radiusStep = (endRadius - startRadius) / layerCount;

        for (let layer = 0; layer < layerCount; layer++) {
          const radius = startRadius + radiusStep * layer + radiusStep / 2;
          const isClockwise = layer % 2 === 0;
          const rotationSpeed = (0.15 + layer * 0.075) * (isClockwise ? 1 : -1);
          const rotation = time * rotationSpeed;
          const dashCount = 12 + layer * 4;
          const dashLength = (Math.PI * 2) / dashCount * 0.6;
          const gapLength = (Math.PI * 2) / dashCount * 0.4;
          const grayValue = 80 + layer * 25;
          const opacity = 0.15 + audioIntensity * 0.15 + (layer * 0.03);

          for (let i = 0; i < dashCount; i++) {
            const startAngle = rotation + i * (dashLength + gapLength);
            const endAngle = startAngle + dashLength;

            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, startAngle, endAngle);
            ctx.strokeStyle = `rgba(${grayValue}, ${grayValue}, ${grayValue}, ${opacity})`;
            ctx.lineWidth = 1 + (layer * 0.3);
            ctx.stroke();
          }

          const dotCount = 8 + layer * 2;
          for (let i = 0; i < dotCount; i++) {
            const angle = rotation * 0.5 + (i / dotCount) * Math.PI * 2;
            const x = centerX + Math.cos(angle) * radius;
            const y = centerY + Math.sin(angle) * radius;

            ctx.beginPath();
            ctx.arc(x, y, 0.8 + layer * 0.2, 0, Math.PI * 2);
            ctx.fillStyle = `rgba(${grayValue + 30}, ${grayValue + 30}, ${grayValue + 30}, ${opacity * 1.5})`;
            ctx.fill();
          }
        }
      }

      const LIGHTNING_COLORS = [
        { r: 255, g: 215, b: 0, hex: '#ffd700' },
        { r: 255, g: 255, b: 255, hex: '#ffffff' },
        { r: 255, g: 200, b: 50, hex: '#ffc832' }
      ];
      let lightningColorIndex = 0;

      function generateLightningSegments(startX, startY, endX, endY, segments = 8) {
        const points = [{ x: startX, y: startY }];
        const dx = endX - startX;
        const dy = endY - startY;

        for (let i = 1; i < segments; i++) {
          const t = i / segments;
          const jaggedness = 15 + t * 25;
          const midX = startX + dx * t + (Math.random() - 0.5) * jaggedness;
          const midY = startY + dy * t + (Math.random() - 0.5) * jaggedness;
          points.push({ x: midX, y: midY });
        }
        points.push({ x: endX, y: endY });
        return points;
      }

      function drawLightning(centerX, centerY) {
        const baseActivationChance = 0.0108;
        const activationChance = baseActivationChance * animationSpeedMultiplier * lightningMultiplier;

        lightningBolts.forEach((bolt, index) => {
          bolt.timer -= animationSpeedMultiplier; // Faster timer countdown on hover

          if (bolt.timer <= 0 && !bolt.active) {
            if (Math.random() < activationChance) {
              bolt.active = true;
              bolt.duration = 3 + Math.random() * 5;
              bolt.opacity = 0.6 + Math.random() * 0.4;
              bolt.color = LIGHTNING_COLORS[lightningColorIndex];
              lightningColorIndex = (lightningColorIndex + 1) % LIGHTNING_COLORS.length;
              bolt.startAngle = Math.random() * Math.PI * 2;

              const startRadius = RING_CONFIG.voidRadius + 5;
              const endRadius = RING_CONFIG.baseRadius + 50 + Math.random() * 50;
              const startX = centerX + Math.cos(bolt.startAngle) * startRadius;
              const startY = centerY + Math.sin(bolt.startAngle) * startRadius;
              const endAngle = bolt.startAngle + (Math.random() - 0.5) * 0.4;
              const endX = centerX + Math.cos(endAngle) * endRadius;
              const endY = centerY + Math.sin(endAngle) * endRadius;

              bolt.segments = generateLightningSegments(startX, startY, endX, endY, 8 + Math.floor(Math.random() * 4));

              if (Math.random() < 0.5) {
                const branchIdx = Math.floor(bolt.segments.length * 0.4 + Math.random() * 0.3);
                const branchPoint = bolt.segments[branchIdx];
                const branchAngle = endAngle + (Math.random() - 0.5) * 0.8;
                const branchRadius = endRadius + Math.random() * 50;
                const branchEndX = centerX + Math.cos(branchAngle) * branchRadius;
                const branchEndY = centerY + Math.sin(branchAngle) * branchRadius;
                bolt.branch = generateLightningSegments(branchPoint.x, branchPoint.y, branchEndX, branchEndY, 4);
                bolt.branchColor = bolt.color;
              } else {
                bolt.branch = null;
              }
            }
            bolt.timer = 10 + Math.random() * 50;
          }

          if (bolt.active) {
            bolt.duration--;
            if (bolt.duration <= 0) {
              bolt.active = false;
              bolt.timer = 30 + Math.random() * 100;
              return;
            }

            const useColor = bolt.color;
            const flashOpacity = bolt.opacity * (0.5 + Math.random() * 0.5);

            ctx.beginPath();
            ctx.moveTo(bolt.segments[0].x, bolt.segments[0].y);
            for (let i = 1; i < bolt.segments.length; i++) {
              ctx.lineTo(bolt.segments[i].x, bolt.segments[i].y);
            }
            ctx.strokeStyle = `rgba(${useColor.r}, ${useColor.g}, ${useColor.b}, ${flashOpacity})`;
            ctx.lineWidth = 2 + Math.random();
            ctx.shadowBlur = 15;
            ctx.shadowColor = useColor.hex;
            ctx.stroke();

            ctx.beginPath();
            ctx.moveTo(bolt.segments[0].x, bolt.segments[0].y);
            for (let i = 1; i < bolt.segments.length; i++) {
              ctx.lineTo(bolt.segments[i].x, bolt.segments[i].y);
            }
            ctx.strokeStyle = `rgba(255, 255, 255, ${flashOpacity * 0.5})`;
            ctx.lineWidth = 1;
            ctx.stroke();
            ctx.shadowBlur = 0;

            if (bolt.branch) {
              const branchColor = bolt.branchColor || useColor;
              ctx.beginPath();
              ctx.moveTo(bolt.branch[0].x, bolt.branch[0].y);
              for (let i = 1; i < bolt.branch.length; i++) {
                ctx.lineTo(bolt.branch[i].x, bolt.branch[i].y);
              }
              ctx.strokeStyle = `rgba(${branchColor.r}, ${branchColor.g}, ${branchColor.b}, ${flashOpacity * 0.6})`;
              ctx.lineWidth = 1;
              ctx.shadowBlur = 8;
              ctx.shadowColor = branchColor.hex;
              ctx.stroke();
              ctx.shadowBlur = 0;
            }
          }
        });
      }

      function animate() {
        // Smoothly interpolate speed multiplier towards target
        animationSpeedMultiplier += (targetSpeedMultiplier - animationSpeedMultiplier) * 0.05;
        time += 0.016 * 0.75 * animationSpeedMultiplier;
        audioIntensity += (targetIntensity - audioIntensity) * 0.1;
        colorTransitionPhase += colorTransitionSpeed * animationSpeedMultiplier;

        // Smoothly interpolate colors towards targets (40% slower)
        primaryColor.r += (targetPrimaryColor.r - primaryColor.r) * COLOR_TRANSITION_SPEED;
        primaryColor.g += (targetPrimaryColor.g - primaryColor.g) * COLOR_TRANSITION_SPEED;
        primaryColor.b += (targetPrimaryColor.b - primaryColor.b) * COLOR_TRANSITION_SPEED;
        primaryColor.hex = `rgb(${Math.round(primaryColor.r)}, ${Math.round(primaryColor.g)}, ${Math.round(primaryColor.b)})`;

        secondaryColor.r += (targetSecondaryColor.r - secondaryColor.r) * COLOR_TRANSITION_SPEED;
        secondaryColor.g += (targetSecondaryColor.g - secondaryColor.g) * COLOR_TRANSITION_SPEED;
        secondaryColor.b += (targetSecondaryColor.b - secondaryColor.b) * COLOR_TRANSITION_SPEED;
        secondaryColor.hex = `rgb(${Math.round(secondaryColor.r)}, ${Math.round(secondaryColor.g)}, ${Math.round(secondaryColor.b)})`;

        targetIntensity = BASE_INTENSITY + Math.sin(time * 3) * 0.1 + Math.sin(time * 5) * 0.08;
        targetIntensity = Math.max(0.3, Math.min(0.7, targetIntensity));

        ctx.clearRect(0, 0, canvas.width, canvas.height);

        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;

        drawOuterGlow(centerX, centerY);
        drawRedOuterRimGlow(centerX, centerY);
        drawRadialLines(centerX, centerY);
        drawFloatingDots(centerX, centerY);
        drawSparkDots(centerX, centerY);
        drawRing(centerX, centerY);
        drawArcSegments(centerX, centerY);
        drawGrayPatternLayers(centerX, centerY);
        drawLightning(centerX, centerY);
        drawCenterVoid(centerX, centerY);

        requestAnimationFrame(animate);
      }

      setupCanvas();
      animate();

      // ============================================================
      // BUTTON HOVER EFFECTS - Change primary and secondary color on mouseover
      // ============================================================
      const brightBlueButtons = ['adminBtnJubilee', 'adminBtnMelody', 'adminBtnAmir'];
      const goldButtons = ['adminBtnZariah', 'adminBtnZev'];

      brightBlueButtons.forEach(btnId => {
        const btn = document.getElementById(btnId);
        if (btn) {
          btn.addEventListener('mouseover', () => {
            targetPrimaryColor = COLOR_PALETTE.brightBlue;
            targetSecondaryColor = COLOR_PALETTE.brightBlue;
          });
          btn.addEventListener('mouseout', () => {
            targetPrimaryColor = COLOR_PALETTE.gold;
            targetSecondaryColor = COLOR_PALETTE.brightYellow;
          });
        }
      });

      goldButtons.forEach(btnId => {
        const btn = document.getElementById(btnId);
        if (btn) {
          btn.addEventListener('mouseover', () => {
            targetPrimaryColor = COLOR_PALETTE.gold;
            targetSecondaryColor = COLOR_PALETTE.gold;
          });
          btn.addEventListener('mouseout', () => {
            targetPrimaryColor = COLOR_PALETTE.gold;
            targetSecondaryColor = COLOR_PALETTE.brightYellow;
          });
        }
      });

      const redButtons = ['adminBtnImani', 'adminBtnSantiago', 'adminBtnTahoma'];

      redButtons.forEach(btnId => {
        const btn = document.getElementById(btnId);
        if (btn) {
          btn.addEventListener('mouseover', () => {
            targetPrimaryColor = COLOR_PALETTE.red;
            targetSecondaryColor = COLOR_PALETTE.red;
          });
          btn.addEventListener('mouseout', () => {
            targetPrimaryColor = COLOR_PALETTE.gold;
            targetSecondaryColor = COLOR_PALETTE.brightYellow;
          });
        }
      });

      const lightGreenButtons = ['adminBtnCaleb', 'adminBtnNova'];

      lightGreenButtons.forEach(btnId => {
        const btn = document.getElementById(btnId);
        if (btn) {
          btn.addEventListener('mouseover', () => {
            targetPrimaryColor = COLOR_PALETTE.lightGreen;
            targetSecondaryColor = COLOR_PALETTE.lightGreen;
          });
          btn.addEventListener('mouseout', () => {
            targetPrimaryColor = COLOR_PALETTE.gold;
            targetSecondaryColor = COLOR_PALETTE.brightYellow;
          });
        }
      });

      const brightPurpleButtons = ['adminBtnElias', 'adminBtnEliana'];

      brightPurpleButtons.forEach(btnId => {
        const btn = document.getElementById(btnId);
        if (btn) {
          btn.addEventListener('mouseover', () => {
            targetPrimaryColor = COLOR_PALETTE.brightPurple;
            targetSecondaryColor = COLOR_PALETTE.brightPurple;
          });
          btn.addEventListener('mouseout', () => {
            targetPrimaryColor = COLOR_PALETTE.gold;
            targetSecondaryColor = COLOR_PALETTE.brightYellow;
          });
        }
      });

      // OpenAI GPT box (Kingdom Builder) - changes visualizer to OpenAI teal on hover, 100% more red glow
      const kingdomBuilderBox = document.getElementById('inspireKingdomBuilder');
      if (kingdomBuilderBox) {
        kingdomBuilderBox.addEventListener('mouseover', () => {
          targetPrimaryColor = COLOR_PALETTE.openaiTeal;
          targetSecondaryColor = COLOR_PALETTE.darkGreen;
          lightningMultiplier = 1.7;
          redGlowMultiplier = 2.0;
        });
        kingdomBuilderBox.addEventListener('mouseout', () => {
          targetPrimaryColor = COLOR_PALETTE.gold;
          targetSecondaryColor = COLOR_PALETTE.brightYellow;
          lightningMultiplier = 1.0;
          redGlowMultiplier = 1.0;
        });
      }

      // Claude box (Creative Fire) - changes visualizer to Claude orange/coral on hover, 100% more red glow
      const creativeFireBox = document.getElementById('inspireCreativeFire');
      if (creativeFireBox) {
        creativeFireBox.addEventListener('mouseover', () => {
          targetPrimaryColor = COLOR_PALETTE.claudeOrange;
          targetSecondaryColor = COLOR_PALETTE.maroon;
          lightningMultiplier = 1.7;
          redGlowMultiplier = 2.0;
        });
        creativeFireBox.addEventListener('mouseout', () => {
          targetPrimaryColor = COLOR_PALETTE.gold;
          targetSecondaryColor = COLOR_PALETTE.brightYellow;
          lightningMultiplier = 1.0;
          redGlowMultiplier = 1.0;
        });
      }

      // Gemini box (Gospel Pulse) - changes visualizer to Gemini/Google blue on hover, 100% more red glow
      const gospelPulseBox = document.getElementById('inspireGospelPulse');
      if (gospelPulseBox) {
        gospelPulseBox.addEventListener('mouseover', () => {
          targetPrimaryColor = COLOR_PALETTE.geminiBlue;
          targetSecondaryColor = COLOR_PALETTE.blue;
          lightningMultiplier = 1.7;
          redGlowMultiplier = 2.0;
        });
        gospelPulseBox.addEventListener('mouseout', () => {
          targetPrimaryColor = COLOR_PALETTE.gold;
          targetSecondaryColor = COLOR_PALETTE.brightYellow;
          lightningMultiplier = 1.0;
          redGlowMultiplier = 1.0;
        });
      }

      // Copilot box (Shepherd Voice) - changes visualizer to Microsoft/Copilot blue on hover, 100% more red glow
      const shepherdVoiceBox = document.getElementById('inspireShepherdVoice');
      if (shepherdVoiceBox) {
        shepherdVoiceBox.addEventListener('mouseover', () => {
          targetPrimaryColor = COLOR_PALETTE.copilotBlue;
          targetSecondaryColor = COLOR_PALETTE.blue;
          lightningMultiplier = 1.7;
          redGlowMultiplier = 2.0;
        });
        shepherdVoiceBox.addEventListener('mouseout', () => {
          targetPrimaryColor = COLOR_PALETTE.gold;
          targetSecondaryColor = COLOR_PALETTE.brightYellow;
          lightningMultiplier = 1.0;
          redGlowMultiplier = 1.0;
        });
      }

      // Grok box (Hebraic Roots) - changes visualizer to Grok/X gray on hover, 100% more red glow
      const hebraicRootsBox = document.getElementById('inspireHebraicRoots');
      if (hebraicRootsBox) {
        hebraicRootsBox.addEventListener('mouseover', () => {
          targetPrimaryColor = COLOR_PALETTE.grokGray;
          targetSecondaryColor = COLOR_PALETTE.white;
          lightningMultiplier = 1.7;
          redGlowMultiplier = 2.0;
        });
        hebraicRootsBox.addEventListener('mouseout', () => {
          targetPrimaryColor = COLOR_PALETTE.gold;
          targetSecondaryColor = COLOR_PALETTE.brightYellow;
          lightningMultiplier = 1.0;
          redGlowMultiplier = 1.0;
        });
      }

      // ============================================================
      // TOP ROW INSPIRE BOXES - Same hover effects as bottom row
      // ============================================================
      const kingdomBuilderBoxTop = document.getElementById('inspireKingdomBuilderTop');
      if (kingdomBuilderBoxTop) {
        kingdomBuilderBoxTop.addEventListener('mouseover', () => {
          targetPrimaryColor = COLOR_PALETTE.brightPurple;
          targetSecondaryColor = COLOR_PALETTE.purple;
          lightningMultiplier = 1.7;
        });
        kingdomBuilderBoxTop.addEventListener('mouseout', () => {
          targetPrimaryColor = COLOR_PALETTE.gold;
          targetSecondaryColor = COLOR_PALETTE.brightYellow;
          lightningMultiplier = 1.0;
        });
      }

      const creativeFireBoxTop = document.getElementById('inspireCreativeFireTop');
      if (creativeFireBoxTop) {
        creativeFireBoxTop.addEventListener('mouseover', () => {
          targetPrimaryColor = COLOR_PALETTE.red;
          targetSecondaryColor = COLOR_PALETTE.maroon;
          lightningMultiplier = 1.7;
        });
        creativeFireBoxTop.addEventListener('mouseout', () => {
          targetPrimaryColor = COLOR_PALETTE.gold;
          targetSecondaryColor = COLOR_PALETTE.brightYellow;
          lightningMultiplier = 1.0;
        });
      }

      const gospelPulseBoxTop = document.getElementById('inspireGospelPulseTop');
      if (gospelPulseBoxTop) {
        gospelPulseBoxTop.addEventListener('mouseover', () => {
          targetPrimaryColor = COLOR_PALETTE.brightBlue;
          targetSecondaryColor = COLOR_PALETTE.blue;
          lightningMultiplier = 1.7;
        });
        gospelPulseBoxTop.addEventListener('mouseout', () => {
          targetPrimaryColor = COLOR_PALETTE.gold;
          targetSecondaryColor = COLOR_PALETTE.brightYellow;
          lightningMultiplier = 1.0;
        });
      }

      const shepherdVoiceBoxTop = document.getElementById('inspireShepherdVoiceTop');
      if (shepherdVoiceBoxTop) {
        shepherdVoiceBoxTop.addEventListener('mouseover', () => {
          targetPrimaryColor = COLOR_PALETTE.lightGreen;
          targetSecondaryColor = COLOR_PALETTE.darkGreen;
          lightningMultiplier = 1.7;
        });
        shepherdVoiceBoxTop.addEventListener('mouseout', () => {
          targetPrimaryColor = COLOR_PALETTE.gold;
          targetSecondaryColor = COLOR_PALETTE.brightYellow;
          lightningMultiplier = 1.0;
        });
      }

      const hebraicRootsBoxTop = document.getElementById('inspireHebraicRootsTop');
      if (hebraicRootsBoxTop) {
        hebraicRootsBoxTop.addEventListener('mouseover', () => {
          targetPrimaryColor = COLOR_PALETTE.gold;
          targetSecondaryColor = COLOR_PALETTE.gold;
          lightningMultiplier = 1.7;
        });
        hebraicRootsBoxTop.addEventListener('mouseout', () => {
          targetPrimaryColor = COLOR_PALETTE.gold;
          targetSecondaryColor = COLOR_PALETTE.brightYellow;
          lightningMultiplier = 1.0;
        });
      }

      // ============================================================
      // ANIMATION SPEED INCREASE - 80% faster on any Inspire button hover
      // ============================================================
      const allInspireButtons = [
        'adminBtnJubilee', 'adminBtnMelody', 'adminBtnZariah', 'adminBtnEliana', 'adminBtnImani', 'adminBtnNova',
        'adminBtnElias', 'adminBtnCaleb', 'adminBtnZev', 'adminBtnAmir', 'adminBtnSantiago', 'adminBtnTahoma'
      ];

      allInspireButtons.forEach(btnId => {
        const btn = document.getElementById(btnId);
        if (btn) {
          btn.addEventListener('mouseover', () => {
            targetSpeedMultiplier = 1.8; // 80% speed increase
          });
          btn.addEventListener('mouseout', () => {
            targetSpeedMultiplier = 1.0; // Return to normal speed
          });
        }
      });
    });

    // ============================================================
    // VIEW SWITCHING FUNCTION - Dashboard, Personas, Models
    // ============================================================
    function switchToDashboardView(viewName) {
      // Remove all view classes from body
      document.body.classList.remove('dashboard-view-active', 'personas-view-active', 'models-view-active', 'jsv-bible-view-active', 'knowledgebase-view-active');

      // Add the new view class
      document.body.classList.add(viewName + '-view-active');

      // Update control button states
      document.querySelectorAll('.control-btn[data-view]').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.view === viewName);
      });
    }

    // ============================================================
    // PERSONAS DATA LOADING
    // ============================================================
    async function loadPersonasData() {
      const personasGrid = document.getElementById('personasGrid');
      if (!personasGrid) return;

      // Define the personas with their data
      const personas = [
        { slug: 'jubilee', name: 'Jubilee Inspire', role: 'Worship Leader & Storyteller', image: '/images/personas/jubilee.png' },
        { slug: 'melody', name: 'Melody Inspire', role: 'Music Ministry', image: '/images/personas/melody.png' },
        { slug: 'zariah', name: 'Zariah Inspire', role: 'Prayer Warrior', image: '/images/personas/zariah.png' },
        { slug: 'eliana', name: 'Eliana Inspire', role: 'Youth Ministry', image: '/images/personas/eliana.png' },
        { slug: 'imani', name: 'Imani Inspire', role: 'Faith Journey', image: '/images/personas/imani.png' },
        { slug: 'nova', name: 'Nova Inspire', role: 'Creative Arts', image: '/images/personas/nova.png' },
        { slug: 'elias', name: 'Elias Inspire', role: 'Biblical Scholar', image: '/images/personas/elias.png' },
        { slug: 'caleb', name: 'Caleb Inspire', role: 'Adventure & Mission', image: '/images/personas/caleb.png' },
        { slug: 'zev', name: 'Zev Inspire', role: 'Hebrew Roots', image: '/images/personas/zev.png' },
        { slug: 'amir', name: 'Amir Inspire', role: 'Leadership & Strategy', image: '/images/personas/amir.png' },
        { slug: 'santiago', name: 'Santiago Inspire', role: 'Latino Ministry', image: '/images/personas/santiago.png' },
        { slug: 'tahoma', name: 'Tahoma Inspire', role: 'Native American Ministry', image: '/images/personas/tahoma.png' }
      ];

      personasGrid.innerHTML = personas.map(persona => `
        <div class="persona-card" data-persona-slug="${persona.slug}">
          <img src="${persona.image}" alt="${persona.name}" class="persona-card-avatar">
          <div class="persona-card-info">
            <div class="persona-card-name">${persona.name}</div>
            <div class="persona-card-role">${persona.role}</div>
          </div>
          <div class="persona-card-stats">
            <div class="persona-card-count" id="personaViewCount-${persona.slug}">0</div>
            <div class="persona-card-label">Sessions</div>
          </div>
        </div>
      `).join('');
    }

    // ============================================================
    // MODELS DATA LOADING
    // ============================================================
    async function loadModelsData() {
      const modelsGrid = document.getElementById('modelsGrid');
      if (!modelsGrid) return;

      // Define the AI models
      const models = [
        { id: 'openai', name: 'GPT-4o', provider: 'OpenAI', status: 'online', tokens: '0', cost: '$0.00' },
        { id: 'claude', name: 'Claude 3.5', provider: 'Anthropic', status: 'online', tokens: '0', cost: '$0.00' },
        { id: 'gemini', name: 'Gemini Pro', provider: 'Google', status: 'online', tokens: '0', cost: '$0.00' },
        { id: 'copilot', name: 'Copilot', provider: 'Microsoft', status: 'offline', tokens: '0', cost: '$0.00' },
        { id: 'grok', name: 'Grok', provider: 'xAI', status: 'online', tokens: '0', cost: '$0.00' }
      ];

      modelsGrid.innerHTML = models.map(model => `
        <div class="model-card" data-model-id="${model.id}">
          <div class="model-card-header">
            <div class="model-card-icon">
              <svg viewBox="0 0 24 24"><path d="M22.2819 9.8211a5.9847 5.9847 0 0 0-.5157-4.9108 6.0462 6.0462 0 0 0-6.5098-2.9A6.0651 6.0651 0 0 0 4.9807 4.1818a5.9847 5.9847 0 0 0-3.9977 2.9 6.0462 6.0462 0 0 0 .7427 7.0966 5.98 5.98 0 0 0 .511 4.9107 6.051 6.051 0 0 0 6.5146 2.9001A5.9847 5.9847 0 0 0 13.2599 24a6.0557 6.0557 0 0 0 5.7718-4.2058 5.9894 5.9894 0 0 0 3.9977-2.9001 6.0557 6.0557 0 0 0-.7475-7.0729z"/></svg>
            </div>
            <div>
              <div class="model-card-title">${model.name}</div>
              <div class="model-card-provider">${model.provider}</div>
            </div>
            <div class="model-status-indicator ${model.status}" title="${model.status}"></div>
          </div>
          <div class="model-card-stats">
            <div class="model-stat">
              <div class="model-stat-value" id="modelTokens-${model.id}">${model.tokens}</div>
              <div class="model-stat-label">Tokens</div>
            </div>
            <div class="model-stat">
              <div class="model-stat-value" id="modelCost-${model.id}">${model.cost}</div>
              <div class="model-stat-label">Cost</div>
            </div>
          </div>
        </div>
      `).join('');
    }
  </script>
</body>
</html>
